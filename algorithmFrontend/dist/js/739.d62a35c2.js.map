{"version":3,"file":"js/739.d62a35c2.js","mappings":"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","sources":["webpack://vue-django-frontend/./src/views/CreateSolutionView.vue","webpack://vue-django-frontend/./src/views/CreateSolutionView.vue?28c0","webpack://vue-django-frontend/./src/api/solution.js"],"sourcesContent":["<template>\n  <div class=\"create-solution-view\">\n    <AppHeader />\n    <main class=\"page-container\">\n      <h1>新建题解</h1>\n      \n      <el-form :model=\"form\" label-width=\"120px\" class=\"solution-form\">\n        <!-- 题目选择区域 -->\n        <el-form-item label=\"题目ID\">\n          <div class=\"question-input\">\n            <el-input v-model=\"form.question_id\" placeholder=\"输入题目ID\" @blur=\"fetchQuestionInfo\" />\n            <el-button \n              type=\"primary\" \n              icon=\"el-icon-link\" \n              :disabled=\"!form.question_id\" \n              @click=\"goToProblem\"\n              title=\"前往题目页面\"\n            >\n              查看题目\n            </el-button>\n          </div>\n        </el-form-item>\n\n        <!-- 题目名称展示区域 -->\n        <el-form-item label=\"题目名称\">\n          <el-input v-model=\"form.question_name\" disabled placeholder=\"获取题目名称\" />\n        </el-form-item>\n\n        <!-- 语言类型选择 -->\n        <el-form-item label=\"语言类型\">\n          <el-input v-model=\"form.language\" placeholder=\"例如: C++, Python, Java\" />\n        </el-form-item>\n\n        <!-- Markdown编辑器 -->\n        <el-form-item label=\"题解内容\">\n          <div class=\"markdown-editor\">\n            <el-tabs v-model=\"activeTab\">\n              <el-tab-pane label=\"编辑\" name=\"edit\">\n                <textarea \n                  v-model=\"form.content\" \n                  class=\"editor-textarea\"\n                  placeholder=\"输入题解内容（Markdown格式）\"\n                ></textarea>\n              </el-tab-pane>\n              <el-tab-pane label=\"预览\" name=\"preview\">\n                <div class=\"markdown-preview\" v-html=\"compiledMarkdown\"></div>\n              </el-tab-pane>\n            </el-tabs>\n          </div>\n        </el-form-item>\n\n        <!-- 按钮组 -->\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"publishSolutionAction\" :loading=\"publishing\">发布</el-button>\n          <el-button type=\"info\" @click=\"saveDraftManually\" :loading=\"manuallySaving\">保存草稿</el-button>\n          <el-button @click=\"resetForm\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </main>\n  </div>\n</template>\n\n<script>\nimport AppHeader from '@/components/AppHeader.vue'\nimport { getQuestionDetail } from '@/api/question'\nimport { saveDraft, publishSolution } from '@/api/solution'\nimport MarkdownIt from 'markdown-it'\nimport DOMPurify from 'dompurify'\n\n// 提前声明MathJax类型以避免no-undef错误\n/* global MathJax */\n\nexport default {\n  name: 'CreateSolutionView',\n  components: {\n    AppHeader\n  },\n  data() {\n    return {\n      activeTab: 'edit',\n      fetching: false,\n      publishing: false,\n      manuallySaving: false,\n      mdi: new MarkdownIt({\n        html: true,\n        linkify: true,\n        typographer: true\n      }),\n      form: {\n        question_id: '',\n        question_name: '',\n        language: '',\n        content: ''\n      },\n      mathJaxLoaded: false,\n      draftId: null // 保存草稿ID，用于后续更新\n    }\n  },\n  computed: {\n    compiledMarkdown() {\n      try {\n        const content = String(this.form.content || '')\n        const html = this.mdi.render(content)\n        return DOMPurify.sanitize(html)\n      } catch (e) {\n        console.error('Markdown处理错误:', e)\n        return '内容解析出错'\n      }\n    }\n  },\n  watch: {\n    activeTab(newVal) {\n      if (newVal === 'preview') {\n        this.initMathJax()\n        this.$nextTick(() => this.renderMathJax())\n      }\n    },\n    'form.content'() {\n      if (this.activeTab === 'preview' && this.mathJaxLoaded) {\n        this.$nextTick(() => this.renderMathJax())\n      }\n    }\n  },\n  mounted() {\n    this.initMathJax()\n  },\n  methods: {\n    // 新增方法：跳转到题目页面\n    goToProblem() {\n      if (this.form.question_id) {\n        this.$router.push(`/${this.form.question_id}/problems`)\n      }\n    },\n    \n    renderMathJax() {\n      if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {\n        MathJax.typesetPromise()\n      }\n    },\n    \n    initMathJax() {\n      if (this.mathJaxLoaded || typeof MathJax !== 'undefined') {\n        this.mathJaxLoaded = true\n        return\n      }\n\n      // 配置MathJax\n      window.MathJax = {\n        tex: {\n          inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],\n          displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']],\n          processEscapes: true\n        },\n        options: {\n          skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']\n        },\n        startup: {\n          ready: () => {\n            MathJax.startup.defaultReady()\n            this.mathJaxLoaded = true\n            if (this.activeTab === 'preview') {\n              this.$nextTick(() => this.renderMathJax())\n            }\n          }\n        }\n      }\n\n      // 加载MathJax脚本\n      const script = document.createElement('script')\n      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js'\n      script.async = true\n      script.onload = () => {\n        this.mathJaxLoaded = true\n      }\n      document.head.appendChild(script)\n    },\n    async fetchQuestionInfo() {\n      if (!this.form.question_id) {\n        this.form.question_name = ''\n        return\n      }\n\n      this.fetching = true\n      try {\n        const response = await getQuestionDetail(this.form.question_id)\n        this.form.question_name = response.data.name\n      } catch (error) {\n        console.error('获取题目信息失败:', error)\n        this.$message.error('获取题目信息失败: ' + (error.message || '未知错误'))\n        this.form.question_name = ''\n      } finally {\n        this.fetching = false\n      }\n    },\n    \n    // 手动保存草稿\n    async saveDraftManually() {\n      if (!this.validateForm(true)) return\n      \n      this.manuallySaving = true\n      \n      try {\n        // 构建请求数据，使用正确的字段名\n        const requestData = {\n          question_id: this.form.question_id,\n          language: this.form.language,\n          content: this.form.content\n        }\n        \n        // 打印请求数据，用于调试\n        console.log('发送草稿保存请求:', requestData)\n        \n        const response = await saveDraft(requestData)\n        \n        console.log('草稿保存响应:', response.data)\n        \n        if (response.data && response.data.code === 200) {\n          this.draftId = response.data.data.id\n          this.$message.success('草稿保存成功')\n        } else {\n          this.$message.error((response.data && response.data.message) || '保存失败')\n        }\n      } catch (error) {\n        console.error('保存草稿失败:', error)\n        \n        // 尝试提取响应中的错误信息\n        if (error.response && error.response.data) {\n          console.log('错误响应详情:', error.response.data)\n          this.$message.error(error.response.data.message || '保存失败')\n        } else {\n          this.$message.error(error.message || '保存失败')\n        }\n      } finally {\n        this.manuallySaving = false\n      }\n    },\n    \n    // 发布题解（正式版本）\n    async publishSolutionAction() {\n      if (!this.validateForm()) return\n      \n      this.publishing = true\n      try {\n        const requestData = {\n          question_id: this.form.question_id,\n          language: this.form.language,\n          content: this.form.content\n        }\n        \n        // 打印请求数据，用于调试\n        console.log('发布题解请求:', requestData)\n        \n        const response = await publishSolution(requestData)\n        \n        console.log('发布题解响应:', response.data)\n        \n        if (response.data && response.data.code === 200) {\n          this.$message.success('题解发布成功')\n          // 发布成功后可以跳转到题解列表或详情页\n          // this.$router.push('/solutions')\n        } else {\n          this.$message.error((response.data && response.data.message) || '发布失败')\n        }\n      } catch (error) {\n        console.error('发布题解失败:', error)\n        \n        // 尝试提取响应中的错误信息\n        if (error.response && error.response.data) {\n          console.log('错误响应详情:', error.response.data)\n          this.$message.error(error.response.data.message || '发布失败')\n        } else {\n          this.$message.error(error.message || '发布失败')\n        }\n      } finally {\n        this.publishing = false\n      }\n    },\n    \n    validateForm(isDraft = false) {\n      if (!this.form.question_id) {\n        this.$message.error('请输入题目ID')\n        return false\n      }\n      if (!this.form.question_name && !isDraft) {\n        this.$message.error('题目ID无效或未获取到题目名称')\n        return false\n      }\n      if (!this.form.language) {\n        this.$message.error('请输入语言类型')\n        return false\n      }\n      if (!this.form.content) {\n        this.$message.error('请输入题解内容')\n        return false\n      }\n      return true\n    },\n    \n    resetForm() {\n      this.form = {\n        question_id: '',\n        question_name: '',\n        language: '',\n        content: ''\n      }\n      this.draftId = null\n    }\n  }\n}\n</script>\n\n<style scoped>\n.create-solution-view {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);\n  padding-top: 60px;\n}\n\n.page-container {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 30px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 12px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(5px);\n  border: 1px solid rgba(0, 0, 0, 0.03);\n}\n\n.page-container h1 {\n  font-size: 2rem;\n  color: #2c3e50;\n  margin-bottom: 2rem;\n  font-weight: 600;\n  text-align: center;\n  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);\n}\n\n.solution-form {\n  max-width: 800px;\n  margin: 0 auto;\n}\n\n.question-input {\n  display: flex;\n  gap: 12px;\n}\n\n.question-input .el-input {\n  flex: 1;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.el-form-item {\n  margin-bottom: 22px;\n}\n\n.el-form-item:last-child {\n  margin-bottom: 0;\n}\n\n.markdown-editor {\n  width: 100%;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n:deep(.markdown-editor .el-tabs__header) {\n  margin: 0;\n}\n\n:deep(.markdown-editor .el-tabs__nav-wrap) {\n  padding: 0 15px;\n  background: #f8f9fa;  \n}\n\n:deep(.markdown-editor .el-tabs__item) {\n  padding: 0 20px;\n  height: 40px;\n  line-height: 40px;\n}\n\n.editor-textarea {\n  width: 100%;\n  min-height: 400px;\n  padding: 15px;\n  border: none;\n  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;\n  font-size: 14px;\n  line-height: 1.6;\n  resize: vertical;\n  background: #fff;\n  color: #333;\n}\n\n.markdown-preview {\n  padding: 20px;\n  min-height: 400px;\n  background: #fff;\n  overflow: auto;\n}\n\n/* MathJax公式样式 */\n.markdown-preview :deep(.MathJax) {\n  color: #333;\n}\n\n/* 其他Markdown样式 */\n.markdown-preview :deep(h1),\n.markdown-preview :deep(h2),\n.markdown-preview :deep(h3) {\n  margin-top: 1em;\n  margin-bottom: 0.5em;\n  color: #333;\n}\n\n.markdown-preview :deep(pre) {\n  background-color: #f6f8fa;\n  padding: 12px;\n  border-radius: 6px;\n  overflow: auto;\n}\n\n.markdown-preview :deep(code) {\n  background-color: #f6f8fa;\n  padding: 0.2em 0.4em;\n  border-radius: 3px;\n  font-family: monospace;\n  color: #c7254e;\n}\n\n.markdown-preview :deep(blockquote) {\n  border-left: 4px solid #dfe2e5;\n  color: #6a737d;\n  padding: 0 1em;\n  margin-left: 0;\n}\n\n.markdown-preview :deep(table) {\n  border-collapse: collapse;\n  width: 100%;\n  margin: 1em 0;\n}\n\n.markdown-preview :deep(th),\n.markdown-preview :deep(td) {\n  border: 1px solid #dfe2e5;\n  padding: 0.6em 1em;\n}\n\n.markdown-preview :deep(ul),\n.markdown-preview :deep(ol) {\n  padding-left: 2em;\n  margin: 1em 0;\n}\n\n.markdown-preview :deep(li) {\n  margin: 0.5em 0;\n}\n\n.markdown-preview :deep(a) {\n  color: #409eff;\n  text-decoration: none;\n}\n\n.markdown-preview :deep(a:hover) {\n  text-decoration: underline;\n}\n\n.markdown-preview :deep(img) {\n  max-width: 100%;\n  border-radius: 4px;\n}\n\n/* 按钮组样式 */\n.el-form-item:last-child {\n  margin-top: 30px;\n  text-align: center;\n}\n\n.el-form-item:last-child .el-button {\n  min-width: 120px;\n  height: 40px;\n  margin: 0 8px;\n}\n\n/* 禁用输入框样式 */\n:deep(.el-input.is-disabled .el-input__inner) {\n  background-color: #f8f9fa;\n  color: #606266;\n  border-color: #e4e7ed;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .page-container {\n    padding: 20px;\n    border-radius: 0;\n  }\n  \n  .question-input {\n    flex-direction: column;\n  }\n  \n  .editor-textarea,\n  .markdown-preview {\n    min-height: 300px;\n  }\n  \n  .el-form-item:last-child .el-button {\n    width: 100%;\n    margin: 8px 0;\n  }\n}\n</style>","import { render } from \"./CreateSolutionView.vue?vue&type=template&id=61c57d92&scoped=true\"\nimport script from \"./CreateSolutionView.vue?vue&type=script&lang=js\"\nexport * from \"./CreateSolutionView.vue?vue&type=script&lang=js\"\n\nimport \"./CreateSolutionView.vue?vue&type=style&index=0&id=61c57d92&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61c57d92\"]])\n\nexport default __exports__","import request from './request'\n\nexport function getSolutionList(params) {\n  return request({\n    url: '/api/solutions/',\n    method: 'get',\n    params\n  })\n}\n\nexport function getSolutionTrashList(params) {\n  return request({\n    url:'/api/solutions/trash/',\n    method: 'get',\n    params\n  })\n}\n\nexport function getDraftList(params) {\n  return request({\n    url: '/api/drafts/',\n    method: 'get',\n    params\n  })\n}\n\nexport function getDraftTrashList(params) {\n  return request({\n    url:'/api/drafts/trash/',\n    method: 'get',\n    params\n  })\n}\n\nexport function getSolutionDetail(id) {\n  return request({\n    url: `/solutions/${id}/`,\n    method: 'get'\n  })\n}\n\nexport function getDraftDetail(id) {\n  return request({\n    url: `/drafts/${id}/`,\n    method: 'get'\n  })\n}\n\n\n\nexport function publishSolution(data) {\n  return request({\n    url: '/api/solution/create/',\n    method: 'post',\n    data\n  })\n}\n\nexport function saveDraft(data) {\n  return request({\n    url: '/api/solution/draft/',\n    method: 'post',\n    data\n  })\n}\n\nexport function updateSolution(id, data) {\n  return request({\n    url: `/solutions/${id}/update/`,\n    method: 'put',\n    data\n  })\n}\n\nexport function updateDraft(id, data) {\n  return request({\n    url: `/drafts/${id}/update/`,\n    method: 'put',\n    data\n  })\n}\n\nexport function getSolutionCount() {\n  return request({\n    url: '/api/solutions/count/',\n    method: 'get'\n  })\n}\n\nexport function getDraftCount() {\n  return request({\n    url: '/api/drafts/count/',\n    method: 'get'\n  })\n}\n\nexport function deleteSolution() {\n  return request({\n    url: '/api/solution/delete/',\n    method: 'post'\n  })\n}\n\nexport function restoreSolution() {\n  return request({\n    url: '/api/solution/restore/',\n    method: 'post'\n  })\n}\n\nexport function DraftToSolution() {\n  return request({\n    url:'/api/solution/pub/',\n    method: 'post'\n  })\n}\n"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_AppHeader","_createElementVNode","_hoisted_2","_component_el_form","model","$data","form","default","_withCtx","_component_el_form_item","label","_hoisted_3","_component_el_input","modelValue","question_id","_cache","$event","placeholder","onBlur","$options","fetchQuestionInfo","_component_el_button","type","icon","disabled","onClick","goToProblem","title","_createTextVNode","_","question_name","language","_hoisted_4","_component_el_tabs","activeTab","_component_el_tab_pane","name","content","innerHTML","compiledMarkdown","_hoisted_5","publishSolutionAction","loading","publishing","saveDraftManually","manuallySaving","resetForm","components","AppHeader","data","fetching","mdi","MarkdownIt","html","linkify","typographer","mathJaxLoaded","draftId","computed","String","this","render","DOMPurify","sanitize","e","console","error","watch","newVal","initMathJax","$nextTick","renderMathJax","mounted","methods","$router","push","MathJax","typesetPromise","window","tex","inlineMath","displayMath","processEscapes","options","skipHtmlTags","startup","ready","defaultReady","script","document","createElement","src","async","onload","head","appendChild","response","getQuestionDetail","$message","message","validateForm","requestData","log","saveDraft","code","id","success","publishSolution","isDraft","__exports__","getSolutionList","params","request","url","method","getSolutionTrashList","getDraftList","getDraftTrashList","getSolutionDetail","getDraftDetail","updateSolution","updateDraft"],"sourceRoot":""}