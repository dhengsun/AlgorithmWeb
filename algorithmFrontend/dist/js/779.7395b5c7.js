"use strict";(self["webpackChunkvue_django_frontend"]=self["webpackChunkvue_django_frontend"]||[]).push([[779],{4779:function(t,e,i){i.r(e),i.d(e,{default:function(){return at}});var s=i(6768),a=i(4232);const o={class:"solution-detail-view"},l={class:"page-container"},n={key:0,class:"loading-container"},u={key:1,class:"error-container"},r={key:2,class:"solution-content"},d={class:"left-section"},c={class:"deleted-banner"},g={class:"solution-title"},f={class:"solution-metadata"},p={class:"solution-time"},k={key:0,class:"solution-time"},m={class:"solution-language"},h={key:1,class:"solution-status"},_=["innerHTML"],y={class:"right-section"},D={class:"info-meta"},b={key:0},v={key:1},L={key:0,class:"action-buttons"},C={class:"difficulty-section"},q={key:0,class:"tags-section"},F={class:"tags-container"},w={key:3,class:"solution-content"},T={class:"left-section"},W={class:"solution-title"},E={class:"solution-metadata"},X={class:"solution-time"},A={key:0,class:"solution-time"},V={class:"solution-language"},z={key:1,class:"solution-status"},Q=["innerHTML"],j={class:"right-section"},N={class:"info-meta"},S={key:0},M={key:1},P={key:0,class:"action-buttons"},I={class:"difficulty-section"},$={key:0,class:"tags-section"},R={class:"tags-container"},H={class:"dialog-footer"},x={class:"dialog-footer"};function U(t,e,i,U,O,J){const K=(0,s.g2)("AppHeader"),G=(0,s.g2)("el-skeleton"),Z=(0,s.g2)("el-alert"),B=(0,s.g2)("el-tag"),Y=(0,s.g2)("el-card"),tt=(0,s.g2)("RefreshLeft"),et=(0,s.g2)("el-icon"),it=(0,s.g2)("el-button"),st=(0,s.g2)("EditPen"),at=(0,s.g2)("View"),ot=(0,s.g2)("Delete"),lt=(0,s.g2)("el-dialog");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(K),(0,s.Lk)("main",l,[O.loading?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(G,{rows:10,animated:""})])):O.error?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(Z,{title:O.error,type:"error",closable:!1},null,8,["title"])])):O.solution&&O.solution.is_deleted?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",d,[(0,s.bF)(Y,{class:"solution-description-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",c,[(0,s.bF)(Z,{title:"此题解已被删除",type:"warning",closable:!1})]),(0,s.Lk)("h1",g,"题目 #"+(0,a.v_)(O.solution.question_id)+" 的解题思路",1),(0,s.Lk)("div",f,[(0,s.Lk)("span",p,[e[8]||(e[8]=(0,s.Lk)("i",{class:"el-icon-time"},null,-1)),(0,s.eW)(" 创建于: "+(0,a.v_)(J.formatDate(O.solution.created_at)),1)]),O.solution.updated_at!==O.solution.created_at?((0,s.uX)(),(0,s.CE)("span",k,[e[9]||(e[9]=(0,s.Lk)("i",{class:"el-icon-edit-outline"},null,-1)),(0,s.eW)(" 更新于: "+(0,a.v_)(J.formatDate(O.solution.updated_at)),1)])):(0,s.Q3)("",!0),(0,s.Lk)("span",m,[(0,s.bF)(B,{size:"small",class:(0,a.C4)("lang-tag-"+J.getNormalizedLanguage(O.solution.language))},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getDisplayLanguage(O.solution.language)),1)])),_:1},8,["class"])]),O.solution.is_draft?((0,s.uX)(),(0,s.CE)("span",h,[(0,s.bF)(B,{size:"small",type:"info"},{default:(0,s.k6)((()=>e[10]||(e[10]=[(0,s.eW)("草稿")]))),_:1})])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",{ref:"markdownContent",class:"markdown-content",innerHTML:J.compiledMarkdown},null,8,_)])),_:1})]),(0,s.Lk)("div",y,[(0,s.bF)(Y,{class:"question-info-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",{onClick:e[0]||(e[0]=t=>J.goToProblem(O.solution.question_id)),class:"clickable-title"},[(0,s.eW)((0,a.v_)(O.questionDetails?.name||`题目 #${O.solution.question_id}`)+" ",1),e[11]||(e[11]=(0,s.Lk)("i",{class:"el-icon-link"},null,-1))]),(0,s.Lk)("div",D,[(0,s.Lk)("div",null,"题目ID: "+(0,a.v_)(O.solution.question_id),1),O.questionDetails?.ext_question_id?((0,s.uX)(),(0,s.CE)("div",b,"外部ID: "+(0,a.v_)(O.questionDetails.ext_question_id),1)):(0,s.Q3)("",!0),O.questionDetails?.oj_platform?((0,s.uX)(),(0,s.CE)("div",v,[e[12]||(e[12]=(0,s.eW)(" 平台: ")),(0,s.bF)(B,{type:J.getPlatformTagType(O.questionDetails.oj_platform),size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getPlatformName(O.questionDetails.oj_platform)),1)])),_:1},8,["type"])])):(0,s.Q3)("",!0)]),J.canManageSolution?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(it,{type:"primary",size:"small",onClick:J.handleRestore},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(tt)])),_:1}),e[13]||(e[13]=(0,s.eW)(" 恢复 "))])),_:1},8,["onClick"]),(0,s.bF)(it,{type:"primary",size:"small",onClick:J.handleEdit},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(st)])),_:1}),e[14]||(e[14]=(0,s.eW)(" 编辑 "))])),_:1},8,["onClick"]),(0,s.bF)(it,{type:"success",size:"small",onClick:e[1]||(e[1]=t=>J.goToProblem(O.solution.question_id))},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(at)])),_:1}),e[15]||(e[15]=(0,s.eW)(" 查看题目 "))])),_:1})])):(0,s.Q3)("",!0)])),_:1}),O.questionDetails?((0,s.uX)(),(0,s.Wv)(Y,{key:0,class:"question-tags-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",C,[e[16]||(e[16]=(0,s.Lk)("h3",null,"难度级别",-1)),(0,s.bF)(B,{type:J.getDifficultyTagType(O.questionDetails),effect:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(O.questionDetails.difficulty),1)])),_:1},8,["type"])]),O.questionDetails.algorithm_tags?.length?((0,s.uX)(),(0,s.CE)("div",q,[e[17]||(e[17]=(0,s.Lk)("h3",null,"算法标签",-1)),(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.questionDetails.algorithm_tags,(t=>((0,s.uX)(),(0,s.Wv)(B,{key:t,type:J.getTagType(t,O.questionDetails.oj_platform),class:"algorithm-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getTagName(t)),1)])),_:2},1032,["type"])))),128))])])):(0,s.Q3)("",!0)])),_:1})):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",T,[(0,s.bF)(Y,{class:"solution-description-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("h1",W,"题目 #"+(0,a.v_)(O.solution.question_id)+" 的解题思路",1),(0,s.Lk)("div",E,[(0,s.Lk)("span",X,[e[18]||(e[18]=(0,s.Lk)("i",{class:"el-icon-time"},null,-1)),(0,s.eW)(" 创建于: "+(0,a.v_)(J.formatDate(O.solution.created_at)),1)]),O.solution.updated_at!==O.solution.created_at?((0,s.uX)(),(0,s.CE)("span",A,[e[19]||(e[19]=(0,s.Lk)("i",{class:"el-icon-edit-outline"},null,-1)),(0,s.eW)(" 更新于: "+(0,a.v_)(J.formatDate(O.solution.updated_at)),1)])):(0,s.Q3)("",!0),(0,s.Lk)("span",V,[(0,s.bF)(B,{size:"small",class:(0,a.C4)("lang-tag-"+J.getNormalizedLanguage(O.solution.language))},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getDisplayLanguage(O.solution.language)),1)])),_:1},8,["class"])]),O.solution.is_draft?((0,s.uX)(),(0,s.CE)("span",z,[(0,s.bF)(B,{size:"small",type:"info"},{default:(0,s.k6)((()=>e[20]||(e[20]=[(0,s.eW)("草稿")]))),_:1})])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",{ref:"markdownContent",class:"markdown-content",innerHTML:J.compiledMarkdown},null,8,Q)])),_:1})]),(0,s.Lk)("div",j,[(0,s.bF)(Y,{class:"question-info-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",{onClick:e[2]||(e[2]=t=>J.goToProblem(O.solution.question_id)),class:"clickable-title"},[(0,s.eW)((0,a.v_)(O.questionDetails?.name||`题目 #${O.solution.question_id}`)+" ",1),e[21]||(e[21]=(0,s.Lk)("i",{class:"el-icon-link"},null,-1))]),(0,s.Lk)("div",N,[(0,s.Lk)("div",null,"题目ID: "+(0,a.v_)(O.solution.question_id),1),O.questionDetails?.ext_question_id?((0,s.uX)(),(0,s.CE)("div",S,"外部ID: "+(0,a.v_)(O.questionDetails.ext_question_id),1)):(0,s.Q3)("",!0),O.questionDetails?.oj_platform?((0,s.uX)(),(0,s.CE)("div",M,[e[22]||(e[22]=(0,s.eW)(" 平台: ")),(0,s.bF)(B,{type:J.getPlatformTagType(O.questionDetails.oj_platform),size:"small"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getPlatformName(O.questionDetails.oj_platform)),1)])),_:1},8,["type"])])):(0,s.Q3)("",!0)]),J.canManageSolution?((0,s.uX)(),(0,s.CE)("div",P,[(0,s.bF)(it,{type:"primary",size:"small",onClick:J.handleEdit},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(st)])),_:1}),e[23]||(e[23]=(0,s.eW)(" 编辑 "))])),_:1},8,["onClick"]),(0,s.bF)(it,{type:"danger",size:"small",onClick:J.handleDelete},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(ot)])),_:1}),e[24]||(e[24]=(0,s.eW)(" 删除 "))])),_:1},8,["onClick"]),(0,s.bF)(it,{type:"success",size:"small",onClick:e[3]||(e[3]=t=>J.goToProblem(O.solution.question_id))},{default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(at)])),_:1}),e[25]||(e[25]=(0,s.eW)(" 查看题目 "))])),_:1})])):(0,s.Q3)("",!0)])),_:1}),O.questionDetails?((0,s.uX)(),(0,s.Wv)(Y,{key:0,class:"question-tags-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",I,[e[26]||(e[26]=(0,s.Lk)("h3",null,"难度级别",-1)),(0,s.bF)(B,{type:J.getDifficultyTagType(O.questionDetails),effect:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(O.questionDetails.difficulty),1)])),_:1},8,["type"])]),O.questionDetails.algorithm_tags?.length?((0,s.uX)(),(0,s.CE)("div",$,[e[27]||(e[27]=(0,s.Lk)("h3",null,"算法标签",-1)),(0,s.Lk)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.questionDetails.algorithm_tags,(t=>((0,s.uX)(),(0,s.Wv)(B,{key:t,type:J.getTagType(t,O.questionDetails.oj_platform),class:"algorithm-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,a.v_)(J.getTagName(t)),1)])),_:2},1032,["type"])))),128))])])):(0,s.Q3)("",!0)])),_:1})):(0,s.Q3)("",!0)])]))]),(0,s.bF)(lt,{modelValue:O.deleteDialogVisible,"onUpdate:modelValue":e[5]||(e[5]=t=>O.deleteDialogVisible=t),title:"确认删除",width:"30%"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",H,[(0,s.bF)(it,{onClick:e[4]||(e[4]=t=>O.deleteDialogVisible=!1)},{default:(0,s.k6)((()=>e[28]||(e[28]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(it,{type:"danger",onClick:J.confirmDelete,loading:O.processing},{default:(0,s.k6)((()=>e[29]||(e[29]=[(0,s.eW)("确认删除")]))),_:1},8,["onClick","loading"])])])),default:(0,s.k6)((()=>[e[30]||(e[30]=(0,s.Lk)("span",null,"确定要删除这篇题解吗？此操作不可逆。",-1))])),_:1},8,["modelValue"]),(0,s.bF)(lt,{modelValue:O.restoreDialogVisible,"onUpdate:modelValue":e[7]||(e[7]=t=>O.restoreDialogVisible=t),title:"确认恢复",width:"30%"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",x,[(0,s.bF)(it,{onClick:e[6]||(e[6]=t=>O.restoreDialogVisible=!1)},{default:(0,s.k6)((()=>e[31]||(e[31]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(it,{type:"primary",onClick:J.confirmRestore,loading:O.processing},{default:(0,s.k6)((()=>e[32]||(e[32]=[(0,s.eW)("确认恢复")]))),_:1},8,["onClick","loading"])])])),default:(0,s.k6)((()=>[e[33]||(e[33]=(0,s.Lk)("span",null,"确定要恢复这篇题解吗？",-1))])),_:1},8,["modelValue"])])}i(4114),i(8111),i(2489),i(1701);var O=i(6493),J=i(8121),K=i(2846),G=i(1184),Z=i(642),B=i(8353),Y=i(7477),tt=i(1219),et={name:"SolutionDetailView",components:{AppHeader:O.A,EditPen:Y.EDh,Delete:Y.epd,View:Y.Ss2,RefreshLeft:Y.Zck},data(){return{solutionId:this.$route.params.id,solution:null,questionDetails:null,loading:!0,error:null,mdi:new Z.A({html:!0,linkify:!0,typographer:!0,breaks:!0}),currentUserId:null,deleteDialogVisible:!1,restoreDialogVisible:!1,processing:!1,languageDisplayMap:{cpp:"C++",csharp:"C#",javascript:"JavaScript",python:"Python",java:"Java",go:"Go",rust:"Rust"}}},computed:{compiledMarkdown(){if(!this.solution)return"";try{const t=String(this.solution.content_text||""),e=this.mdi.render(t);return B.A.sanitize(e)}catch(t){return console.error("Markdown处理错误:",t),"内容解析出错"}},canManageSolution(){return!0}},mounted(){this.fetchSolutionDetail()},methods:{async fetchSolutionDetail(){this.loading=!0,this.error=null;try{const t=await(0,J.Nc)(this.solutionId);t.data&&200===t.data.code?this.solution=t.data.data:this.solution=t.data,this.solution&&this.solution.question_id&&await this.fetchQuestionDetail(this.solution.question_id)}catch(t){console.error("获取题解详情失败:",t),this.error="获取题解详情失败: "+(t.message||"未知错误")}finally{this.loading=!1}},async fetchQuestionDetail(t){try{const e=await(0,K.so)(t);e.data&&200===e.data.code?this.questionDetails=e.data.data:this.questionDetails=e.data,this.questionDetails&&"string"===typeof this.questionDetails.algorithm_tags&&(this.questionDetails.algorithm_tags=this.questionDetails.algorithm_tags.split(",").map((t=>t.trim())).filter((t=>t.length>0)))}catch(e){console.error("获取题目详情失败:",e)}},handleEdit(){this.solution&&this.$router.push(`/${this.solution.id}/solutions/update`)},handleDelete(){this.solution&&!this.solution.is_deleted&&(this.deleteDialogVisible=!0)},handleRestore(){this.solution&&(this.restoreDialogVisible=!0)},async confirmDelete(){if(this.solution){this.processing=!0;try{const t=await(0,G.A)({url:"/api/solution/delete/",method:"post",data:{id:this.solution.id}});this.deleteDialogVisible=!1,(0,tt.nk)({type:"success",message:t.message||"题解删除成功"}),await this.fetchSolutionDetail()}catch(t){console.error("删除题解失败:",t);const e=t.response?.data?.message||t.message||"删除失败: 未知错误";(0,tt.nk)({type:"error",message:e})}finally{this.processing=!1}}},async confirmRestore(){if(this.solution){this.processing=!0;try{const t=await(0,G.A)({url:"/api/solution/restore/",method:"post",data:{id:this.solution.id}});this.restoreDialogVisible=!1,(0,tt.nk)({type:"success",message:t.message||"题解恢复成功"}),await this.fetchSolutionDetail()}catch(t){console.error("恢复题解失败:",t);const e=t.response?.data?.message||t.message||"恢复失败: 未知错误";(0,tt.nk)({type:"error",message:e})}finally{this.processing=!1}}},goToProblem(t){this.$router.push(`/${t}/problems`)},formatDate(t){if(!t)return"未知时间";const e=new Date(t);return e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getNormalizedLanguage(t){if(!t)return"";const e=t.toLowerCase(),i={cpp:"c++",csharp:"c#"};return i[e]||e},getDisplayLanguage(t){if(!t)return"";const e=t.toLowerCase();return this.languageDisplayMap[e]?this.languageDisplayMap[e]:t.charAt(0).toUpperCase()+t.slice(1)},getPlatformName(t){const e={luogu:"洛谷",leetcode:"LeetCode"};return e[t]||t},getPlatformTagType(t){return{luogu:"success",leetcode:"warning"}[t]||"info"},getDifficultyTagType(t){if("luogu"===t.oj_platform){const e={"入门":"info","普及-":"success","普及/提高-":"success","普及+/提高":"warning","提高+/省选-":"danger","省选/NOI-":"danger","NOI/NOI+":"danger",CTSC:"danger"};return e[t.difficulty]||"info"}return{"简单":"success","中等":"warning","困难":"danger"}[t.difficulty]||"info"},getTagType(t,e){if("leetcode"===e)return"primary";const i=t.split("_")[0];return{Algorithm:"primary",Source:"success",Time:"warning",Region:"danger",Other:"info"}[i]||"info"},getTagName(t){const e=t.split("_");return e.length>1?e.slice(1).join("_"):t}}},it=i(1241);const st=(0,it.A)(et,[["render",U],["__scopeId","data-v-1d63a89c"]]);var at=st},8121:function(t,e,i){i.d(e,{J1:function(){return c},Nc:function(){return u},R1:function(){return g},S1:function(){return l},Tu:function(){return d},Up:function(){return a},_n:function(){return o},jA:function(){return f},n6:function(){return r},uA:function(){return n}});var s=i(1184);function a(t){return(0,s.A)({url:"/api/solutions/",method:"get",params:t})}function o(t){return(0,s.A)({url:"/api/solutions/trash/",method:"get",params:t})}function l(t){return(0,s.A)({url:"/api/drafts/",method:"get",params:t})}function n(t){return(0,s.A)({url:"/api/drafts/trash/",method:"get",params:t})}function u(t){return(0,s.A)({url:`/solutions/${t}/`,method:"get"})}function r(t){return(0,s.A)({url:`/drafts/${t}/`,method:"get"})}function d(t){return(0,s.A)({url:"/api/solution/create/",method:"post",data:t})}function c(t){return(0,s.A)({url:"/api/solution/draft/",method:"post",data:t})}function g(t,e){return(0,s.A)({url:`/solutions/${t}/update/`,method:"put",data:e})}function f(t,e){return(0,s.A)({url:`/drafts/${t}/update/`,method:"put",data:e})}}}]);
//# sourceMappingURL=779.7395b5c7.js.map