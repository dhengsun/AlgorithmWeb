"use strict";(self["webpackChunkvue_django_frontend"]=self["webpackChunkvue_django_frontend"]||[]).push([[127],{2127:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var l=a(6768),o=a(4232),r=a(5130);const i={class:"create-view"},s={class:"layout-container"},n={class:"control-panel"},d={class:"url-input"},u={class:"tags-container"},c={key:0,class:"no-tags-hint"},f={class:"markdown-editor"},m={class:"preview-panel"},h={class:"preview-header"},g={class:"preview-meta"},p={key:0,class:"preview-title"},b={key:0,class:"preview-tags"},v={class:"preview-content"},k=["innerHTML"],y={key:0,class:"empty-preview"};function _(e,t,a,_,T,C){const F=(0,l.g2)("AppHeader"),w=(0,l.g2)("el-input"),x=(0,l.g2)("el-button"),L=(0,l.g2)("el-form-item"),j=(0,l.g2)("el-option"),V=(0,l.g2)("el-select"),S=(0,l.g2)("el-tag"),M=(0,l.g2)("el-option-group"),I=(0,l.g2)("el-form"),J=(0,l.g2)("Document"),X=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(F),(0,l.Lk)("div",s,[(0,l.Lk)("div",n,[t[10]||(t[10]=(0,l.Lk)("h1",null,"新建题目",-1)),(0,l.bF)(I,{model:T.form,"label-width":"100px",class:"problem-form"},{default:(0,l.k6)((()=>[(0,l.bF)(L,{label:"题目URL"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",d,[(0,l.bF)(w,{modelValue:T.form.url,"onUpdate:modelValue":t[0]||(t[0]=e=>T.form.url=e),placeholder:"输入题目URL"},null,8,["modelValue"]),(0,l.bF)(x,{type:"primary",onClick:C.fetchQuestionInfo,loading:T.fetching},{default:(0,l.k6)((()=>t[7]||(t[7]=[(0,l.eW)(" 提取题目信息 ")]))),_:1},8,["onClick","loading"])])])),_:1}),(0,l.bF)(L,{label:"平台"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{modelValue:T.form.oj_platform,"onUpdate:modelValue":t[1]||(t[1]=e=>T.form.oj_platform=e),placeholder:"选择平台",onChange:C.handlePlatformChange},{default:(0,l.k6)((()=>[(0,l.bF)(j,{label:"洛谷",value:"luogu"}),(0,l.bF)(j,{label:"LeetCode",value:"leetcode"})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,l.bF)(L,{label:"站外ID"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{modelValue:T.form.ext_question_id,"onUpdate:modelValue":t[2]||(t[2]=e=>T.form.ext_question_id=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(L,{label:"题目名称"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{modelValue:T.form.name,"onUpdate:modelValue":t[3]||(t[3]=e=>T.form.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(L,{label:"难度"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{modelValue:T.form.difficulty,"onUpdate:modelValue":t[4]||(t[4]=e=>T.form.difficulty=e),placeholder:"选择难度",style:{width:"100%"}},{default:(0,l.k6)((()=>["leetcode"===T.form.oj_platform?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(j,{label:"简单",value:"简单"}),(0,l.bF)(j,{label:"中等",value:"中等"}),(0,l.bF)(j,{label:"困难",value:"困难"})],64)):"luogu"===T.form.oj_platform?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bF)(j,{label:"入门",value:"入门"}),(0,l.bF)(j,{label:"普及-",value:"普及-"}),(0,l.bF)(j,{label:"普及/提高-",value:"普及/提高-"}),(0,l.bF)(j,{label:"普及+/提高",value:"普及+/提高"}),(0,l.bF)(j,{label:"提高+/省选-",value:"提高+/省选-"}),(0,l.bF)(j,{label:"省选/NOI-",value:"省选/NOI-"}),(0,l.bF)(j,{label:"NOI/NOI+",value:"NOI/NOI+"}),(0,l.bF)(j,{label:"CTSC",value:"CTSC"})],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.bF)(j,{label:"简单",value:"简单"}),(0,l.bF)(j,{label:"中等",value:"中等"}),(0,l.bF)(j,{label:"困难",value:"困难"})],64))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(L,{label:"已选标签"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",u,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.selectedTags,(e=>((0,l.uX)(),(0,l.Wv)(S,{key:e,closable:"",type:C.getTagType(e,T.form.oj_platform),onClose:t=>C.handleTagClose(e),class:"algorithm-tag"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(C.getTagName(e)),1)])),_:2},1032,["type","onClose"])))),128)),0===T.selectedTags.length?((0,l.uX)(),(0,l.CE)("div",c," 暂无已选标签，请在下方添加 ")):(0,l.Q3)("",!0)])])),_:1}),(0,l.bF)(L,{label:"添加标签"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{modelValue:T.tagSearchValue,"onUpdate:modelValue":t[5]||(t[5]=e=>T.tagSearchValue=e),filterable:"",remote:"","reserve-keyword":"",placeholder:"输入关键词搜索标签","remote-method":C.searchTags,loading:T.tagSearchLoading,onChange:C.handleTagSelect,class:"tag-select",clearable:""},{default:(0,l.k6)((()=>["luogu"===T.form.oj_platform&&T.tagCategoryTitle?((0,l.uX)(),(0,l.Wv)(M,{key:0,label:T.tagCategoryTitle},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.filteredTags,(e=>((0,l.uX)(),(0,l.Wv)(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["label"])):((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(T.filteredTags,(e=>((0,l.uX)(),(0,l.Wv)(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","remote-method","loading","onChange"])])),_:1}),(0,l.bF)(L,{label:"题目描述"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",f,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>T.form.content=e),class:"editor-textarea",placeholder:"输入题目描述（Markdown格式）"},null,512),[[r.Jo,T.form.content]])])])),_:1}),(0,l.bF)(L,{class:"form-actions"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{type:"primary",onClick:C.saveProblem,loading:T.saving},{default:(0,l.k6)((()=>t[8]||(t[8]=[(0,l.eW)("保存")]))),_:1},8,["onClick","loading"]),(0,l.bF)(x,{onClick:C.resetForm},{default:(0,l.k6)((()=>t[9]||(t[9]=[(0,l.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,l.Lk)("div",m,[(0,l.Lk)("div",h,[t[11]||(t[11]=(0,l.Lk)("h2",null,"预览",-1)),(0,l.Lk)("div",g,[T.form.name?((0,l.uX)(),(0,l.CE)("div",p,(0,o.v_)(T.form.name),1)):(0,l.Q3)("",!0),T.form.difficulty?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,o.C4)(["preview-difficulty",C.getDifficultyClass()])},(0,o.v_)(T.form.difficulty),3)):(0,l.Q3)("",!0)]),T.selectedTags.length>0?((0,l.uX)(),(0,l.CE)("div",b,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.selectedTags,(e=>((0,l.uX)(),(0,l.Wv)(S,{key:e,type:C.getTagType(e,T.form.oj_platform),class:"preview-tag",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)(C.getTagName(e)),1)])),_:2},1032,["type"])))),128))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",v,[(0,l.Lk)("div",{class:"markdown-preview",innerHTML:C.compiledMarkdown},null,8,k),T.form.content?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(X,null,{default:(0,l.k6)((()=>[(0,l.bF)(J)])),_:1}),t[12]||(t[12]=(0,l.Lk)("p",null,"在左侧输入内容后此处将显示预览",-1))]))])])])])}a(4114),a(8111),a(2489),a(1701),a(3579);var T=a(6493),C=a(7477),F=a(2846),w=a(642),x=a(8353),L=a(1219),j=a(2196),V={name:"CreateView",components:{AppHeader:T.A,Document:C.yoT},data(){return{fetching:!1,saving:!1,mdi:new w.A({html:!0,linkify:!0,typographer:!0}),form:{url:"",oj_platform:"",ext_question_id:"",name:"",difficulty:"",content:""},mathJaxLoaded:!1,selectedTags:[],tagSearchValue:"",tagSearchLoading:!1,tagCategoryTitle:"",allTags:{leetcode:j.dv.map((e=>({label:e,value:e}))),luogu:{Algorithm:[],Source:[],Time:[],Region:[],Other:[]}},filteredTags:[]}},computed:{compiledMarkdown(){try{const e=String(this.form.content||""),t=this.mdi.render(e);return x.A.sanitize(t)}catch(e){return console.error("Markdown处理错误:",e),"内容解析出错"}}},watch:{"form.content"(){this.mathJaxLoaded&&this.$nextTick((()=>this.renderMathJax()))}},mounted(){this.initMathJax(),this.loadAllTags()},methods:{getDifficultyClass(){const e=this.form.difficulty;if(!e)return"";if("leetcode"===this.form.oj_platform){const t={"简单":"diff-easy","中等":"diff-medium","困难":"diff-hard"};return t[e]||""}return"luogu"===this.form.oj_platform?e.includes("入门")?"diff-easy":e.includes("普及")?"diff-medium":"diff-hard":""},async loadAllTags(){try{const e=await(0,F.r)();e.data&&200===e.data.code&&(this.allTags.luogu=e.data.data)}catch(e){console.error("加载标签失败:",e),L.nk.error("加载标签数据失败")}},handlePlatformChange(){this.tagSearchValue="",this.filteredTags=[],this.selectedTags.length>0&&(confirm("切换平台将清空已选标签，是否继续？")?this.selectedTags=[]:this.form.oj_platform="leetcode"===this.form.oj_platform?"luogu":"leetcode")},searchTags(e){if(this.tagSearchLoading=!0,this.tagCategoryTitle="",""===e.trim())return this.filteredTags=[],void(this.tagSearchLoading=!1);setTimeout((()=>{if("leetcode"===this.form.oj_platform)this.filteredTags=this.allTags.leetcode.filter((t=>t.label.toLowerCase().includes(e.toLowerCase())));else if("luogu"===this.form.oj_platform){let t=[];for(const a in this.allTags.luogu){const l=this.allTags.luogu[a].filter((t=>t.name.toLowerCase().includes(e.toLowerCase()))).map((e=>({label:e.name,value:`${a}_${e.name}`,category:a})));l.length&&(this.tagCategoryTitle=this.getCategoryName(a),t=[...t,...l])}this.filteredTags=t}this.tagSearchLoading=!1}),200)},getCategoryName(e){const t={Algorithm:"算法标签",Source:"来源标签",Time:"时间标签",Region:"地区标签",Other:"其他标签"};return t[e]||e},handleTagSelect(e){e&&(this.selectedTags.includes(e)?L.nk.warning("该标签已添加"):(this.selectedTags.push(e),L.nk.success("标签添加成功")),this.tagSearchValue="")},getTagName(e){if(this.allTags.leetcode.some((t=>t.value===e)))return e;const t=e.split("_");return t.length>1?t.slice(1).join("_"):e},getTagType(e,t){if("leetcode"===t)return"primary";const a=e.split("_")[0];return{Algorithm:"primary",Source:"success",Time:"warning",Region:"danger",Other:"info"}[a]||"info"},handleTagClose(e){this.selectedTags=this.selectedTags.filter((t=>t!==e))},renderMathJax(){"undefined"!==typeof MathJax&&MathJax.typesetPromise&&MathJax.typesetPromise()},initMathJax(){if(this.mathJaxLoaded||"undefined"!==typeof MathJax)return void(this.mathJaxLoaded=!0);window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{ready:()=>{MathJax.startup.defaultReady(),this.mathJaxLoaded=!0,this.$nextTick((()=>this.renderMathJax()))}}};const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",e.async=!0,e.onload=()=>{this.mathJaxLoaded=!0},document.head.appendChild(e)},async fetchQuestionInfo(){if(this.form.url){this.fetching=!0;try{const e=await(0,F.wE)({url:this.form.url}),t=e.data;this.form={...this.form,url:t.url||this.form.url,oj_platform:t.oj_platform||this.form.oj_platform,ext_question_id:t.ext_question_id||this.form.ext_question_id,name:t.name||this.form.name,difficulty:t.difficulty||this.form.difficulty,content:t.content||this.form.content},t.algorithm_tags&&Array.isArray(t.algorithm_tags)&&(this.selectedTags=[...t.algorithm_tags]),L.nk.success("题目信息抓取成功")}catch(e){console.error("抓取题目信息失败:",e),L.nk.error("抓取题目信息失败")}finally{this.fetching=!1}}else L.nk.error("请输入题目URL")},async saveProblem(){if(!this.validateForm())return;const e={ext_question_id:this.form.ext_question_id,name:this.form.name,url:this.form.url,oj_platform:this.form.oj_platform,difficulty:this.form.difficulty,content:this.form.content,algorithm_tags:this.selectedTags};this.saving=!0;try{const t=await(0,F.hG)(e),{status:a,message:l,data:o}=t.data;"success"===a?(L.nk.success(l||"题目创建成功"),console.log("创建的题目数据:",o),this.resetForm()):L.nk.error(l||"题目创建失败")}catch(t){console.error("保存题目失败:",t),L.nk.error("保存题目失败: "+(t.message||"未知错误"))}finally{this.saving=!1}},validateForm(){return this.form.oj_platform?this.form.ext_question_id?this.form.name?!!this.form.content||(L.nk.error("请输入题目描述"),!1):(L.nk.error("请输入题目名称"),!1):(L.nk.error("请输入站外ID"),!1):(L.nk.error("请选择平台"),!1)},resetForm(){this.form={url:"",oj_platform:"",ext_question_id:"",name:"",difficulty:"",content:""},this.selectedTags=[],this.tagSearchValue=""}}},S=a(1241);const M=(0,S.A)(V,[["render",_],["__scopeId","data-v-351e829c"]]);var I=M},2196:function(e,t,a){a.d(t,{PU:function(){return r},dv:function(){return l},ur:function(){return o}});a(4114),a(8111),a(7588);const l=["Shell","二分查找","二叉搜索树","二叉树","交互","位运算","分治","前缀和","单向链表","单调栈","单调队列","双向链表","双指针","双连通分量","后缀数组","哈希函数","哈希表","图","基数排序","堆（优先队列）","字典树","字符串","字符串匹配","归并排序","快速选择","扫描线","拒绝采样","拓扑排序","排序","数论","数学","数据库","数据流","数组","最小生成树","最短路","有序集合","栈","树","树状数组","欧拉回路","概率与统计","模拟","滑动窗口","滚动哈希","深度优先搜索","状态压缩","矩阵","线段树","组合数学","脑筋急转弯","计数","计数排序","设计","贪心","迭代器","递归","链表","队列","随机化","集合","几何","动态规划","博弈","并查集","广度优先搜索","强连通分量","桶排序","水塘抽样","记忆化搜索","回溯","多线程","枚举"],o=["入门","普及-","普及/提高-","普及+/提高","提高+/省选-","省选/NOI-","NOI/NOI+","CTSC"],r=["简单","中等","困难"]}}]);
//# sourceMappingURL=127.00c2936b.js.map