{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-box\"\n};\nconst _hoisted_3 = {\n  class: \"login-header\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"subtitle\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"subtitle\"\n};\nconst _hoisted_6 = {\n  class: \"register-link\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon_user = _resolveComponent(\"el-icon-user\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_icon_lock = _resolveComponent(\"el-icon-lock\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"登录\", -1)), $data.loginForm.username ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"欢迎 \" + _toDisplayString($data.loginForm.username), 1)) : (_openBlock(), _createElementBlock(\"p\", _hoisted_5, \"请输入您的用户名和密码\"))]), _createVNode(_component_el_form, {\n    model: $data.loginForm,\n    ref: \"loginFormRef\",\n    rules: $data.rules,\n    class: \"login-form\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        placeholder: \"用户名\",\n        size: \"large\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"input-icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon_user)]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"])]),\n      _: 1\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        type: \"password\",\n        placeholder: \"密码\",\n        size: \"large\",\n        \"show-password\": \"\"\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"input-icon\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_icon_lock)]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"modelValue\"])]),\n      _: 1\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        loading: $data.loading,\n        size: \"large\",\n        class: \"login-button\",\n        onClick: $options.handleLogin\n      }, {\n        default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 登录 \")])),\n        _: 1\n      }, 8, [\"loading\", \"onClick\"])]),\n      _: 1\n    })]),\n    _: 1\n  }, 8, [\"model\", \"rules\"]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.goToRegister && $options.goToRegister(...args))\n  }, \"马上注册\")])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$data","loginForm","username","_hoisted_4","_toDisplayString","_hoisted_5","_createVNode","_component_el_form","model","ref","rules","default","_withCtx","_component_el_form_item","prop","_component_el_input","modelValue","_cache","$event","placeholder","size","prefix","_component_el_icon","_component_el_icon_user","_","password","type","_component_el_icon_lock","_component_el_button","loading","onClick","$options","handleLogin","_createTextVNode","_hoisted_6","href","args","goToRegister"],"sources":["/Users/hsd/File/Code/Project/AlgorithmWeb/algorithmFrontend/src/views/LoginView.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-box\">\n      <div class=\"login-header\">\n        <h2>登录</h2>\n        <p class=\"subtitle\" v-if=\"loginForm.username\">欢迎 {{ loginForm.username }}</p>\n        <p class=\"subtitle\" v-else>请输入您的用户名和密码</p>\n      </div>\n      <el-form \n        :model=\"loginForm\" \n        ref=\"loginFormRef\" \n        :rules=\"rules\"\n        class=\"login-form\">\n        <el-form-item prop=\"username\">\n          <el-input \n            v-model=\"loginForm.username\"\n            placeholder=\"用户名\"\n            size=\"large\">\n            <template #prefix>\n              <el-icon class=\"input-icon\"><el-icon-user /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input \n            v-model=\"loginForm.password\"\n            type=\"password\"\n            placeholder=\"密码\"\n            size=\"large\"\n            show-password>\n            <template #prefix>\n              <el-icon class=\"input-icon\"><el-icon-lock /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button \n            type=\"primary\" \n            :loading=\"loading\"\n            size=\"large\"\n            class=\"login-button\"\n            @click=\"handleLogin\">\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n      <div class=\"register-link\">\n        <a href=\"javascript:void(0)\" @click=\"goToRegister\">马上注册</a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\nimport { User as ElIconUser, Lock as ElIconLock } from '@element-plus/icons-vue'\nimport { login } from '@/api/auth'\n\nexport default {\n  name: 'LoginView',\n  components: {\n    ElIconUser,\n    ElIconLock\n  },\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loading: false,\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created() {\n    console.log('LoginView组件已创建')\n  },\n  methods: {\n    async handleLogin() {\n      if (!this.$refs.loginFormRef) return\n      \n      try {\n        await this.$refs.loginFormRef.validate()\n        this.loading = true\n        \n        const response = await login(this.loginForm)\n        console.log('登录响应:', response.data)\n\n        // 存储 token 和用户信息\n        localStorage.setItem('access_token', response.data.access)\n        localStorage.setItem('refresh_token', response.data.refresh)\n        localStorage.setItem('user_info', JSON.stringify(response.data.user))\n\n        ElMessage.success('登录成功')\n        this.$router.push('/')\n      } catch (error) {\n        console.error('登录错误:', error)\n        ElMessage.error(error.response?.data?.detail || '登录失败')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    goToRegister() {\n      this.$router.push('/register')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-image: url('../assets/auth.jpg');\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  overflow: hidden;\n}\n\n.login-container::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1;\n}\n\n.login-box {\n  position: relative;\n  width: 450px;\n  padding: 40px;\n  border-radius: 12px;\n  background: rgba(33, 33, 38, 0.8);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  z-index: 2;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.login-header h2 {\n  font-size: 28px;\n  font-weight: 600;\n  color: #ffffff;\n  margin-bottom: 8px;\n}\n\n.subtitle {\n  font-size: 16px;\n  color: #e1e1e1;\n  margin-bottom: 20px;\n  min-height: 24px;\n  transition: all 0.3s ease;\n}\n\n.login-form {\n  margin-top: 20px;\n}\n\n.login-button {\n  width: 100%;\n  margin-top: 10px;\n  padding: 12px 0;\n  font-size: 16px;\n  border-radius: 6px;\n  background: #409EFF;\n  border-color: #409EFF;\n}\n\n.input-icon {\n  color: #909399;\n  font-size: 18px;\n}\n\n/* 登录框内输入框样式 */\n:deep(.el-input__wrapper) {\n  background-color: rgba(255, 255, 255, 0.1);\n  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1) inset;\n}\n\n:deep(.el-input__inner) {\n  color: #ffffff;\n}\n\n:deep(.el-input__inner::placeholder) {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n/* 输入框悬停样式 */\n:deep(.el-input:hover .el-input__wrapper) {\n  box-shadow: 0 0 0 1px #409EFF inset;\n}\n\n/* 按钮悬停样式 */\n.login-button:hover {\n  background-color: #66b1ff;\n  border-color: #66b1ff;\n  color: #fff;\n}\n\n.register-link {\n  text-align: center;\n  margin-top: 20px;\n  color: #ccc;\n  font-size: 14px;\n}\n\n.register-link a {\n  color: #409EFF;\n  text-decoration: none;\n  transition: color 0.3s ease;\n}\n\n.register-link a:hover {\n  color: #66b1ff;\n  text-decoration: underline;\n}\n\n/* 响应式设计 */\n@media screen and (max-width: 768px) {\n  .login-box {\n    width: 90%;\n    max-width: 450px;\n    padding: 30px;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}