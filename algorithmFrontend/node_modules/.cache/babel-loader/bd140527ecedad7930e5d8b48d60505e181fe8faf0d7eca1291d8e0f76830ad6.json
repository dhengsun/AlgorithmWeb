{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\n\n// 定义路由\nconst routes = [\n// 不需要导航栏的路由\n{\n  path: '/login',\n  name: 'LoginView',\n  component: () => import('../views/LoginView.vue'),\n  meta: {\n    hideHeader: true,\n    // 标记不需要显示导航栏\n    guest: true // 标记为访客页面（已登录用户不应访问）\n  }\n},\n// {\n//   path: '/register',\n//   name: 'RegisterView',\n//   component: () => import('../views/RegisterView.vue'),\n//   meta: { \n//     hideHeader: true,\n//     guest: true\n//   }\n// },\n\n// 需要登录权限的路由\n{\n  path: '/',\n  name: 'HomeView',\n  component: () => import('../views/HomeView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/problems',\n  name: 'ProblemsView',\n  component: () => import('../views/ProblemsView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/solutions',\n  name: 'SolutionsView',\n  component: () => import('../views/SolutionsView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/solutions/trash',\n  name: 'SolutionTrashView',\n  component: () => import('../views/SolutionTrashView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/drafts/trash',\n  name: 'DraftTrashView',\n  component: () => import('../views/DraftTrashView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/drafts',\n  name: 'DraftsView',\n  component: () => import('../views/DraftsView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/create',\n  name: 'Create',\n  component: () => import('@/views/CreateView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/create/solution',\n  name: 'CreateSolution',\n  component: () => import('@/views/CreateSolutionView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/create/question',\n  name: 'CreateQuestion',\n  component: () => import('@/views/CreateQuestionView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/questions/update/:id?',\n  name: 'QuestionUpdate',\n  component: () => import('@/views/QuestionUpdate.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/trash',\n  name: 'Trash',\n  component: () => import('@/views/TrashView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/problems/trash',\n  name: 'ProblemsTrash',\n  component: () => import('@/views/ProblemTrashView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n},\n// 详情页面也需要验证\n{\n  path: '/:id/problems',\n  name: 'QuestionDetail',\n  component: () => import('@/views/QuestionDetailView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/:id/solutions',\n  name: 'SolutionDetail',\n  component: () => import('@/views/SolutionDetailView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/:id/drafts',\n  name: 'DraftDetail',\n  component: () => import('@/views/DraftDetailView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/:id/solutions/update',\n  name: 'Solution/update',\n  component: () => import('@/views/SolutionUpdateView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/:id/drafts/update',\n  name: 'Draft/update',\n  component: () => import('@/views/DraftUpdateView.vue'),\n  meta: {\n    requiresAuth: true\n  }\n},\n// 404页面\n{\n  path: '/:catchAll(.*)',\n  name: 'NotFound',\n  component: () => import('@/views/NotFoundView.vue'),\n  meta: {\n    hideHeader: true // 确保404页面不显示导航栏\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\n\n// 强化路由守卫\nrouter.beforeEach((to, from, next) => {\n  console.log('路由切换:', to.path); // 调试日志\n\n  const token = localStorage.getItem('access_token');\n\n  // 检查路由是否需要认证\n  if (to.matched.some(record => record.meta.requiresAuth) && !token) {\n    console.log('需要登录权限，重定向到登录页');\n    // 保存原来要访问的页面路径，登录后可以重定向回去\n    next({\n      path: '/login',\n      query: {\n        redirect: to.fullPath\n      }\n    });\n  }\n  // 如果是访客页面（登录页）且用户已登录，重定向到首页\n  else if (to.matched.some(record => record.meta.guest) && token) {\n    console.log('已登录用户访问登录页，重定向到首页');\n    next({\n      path: '/'\n    });\n  }\n  // 其他情况正常通过\n  else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","routes","path","name","component","meta","hideHeader","guest","requiresAuth","router","history","process","env","BASE_URL","beforeEach","to","from","next","console","log","token","localStorage","getItem","matched","some","record","query","redirect","fullPath"],"sources":["/Users/hsd/File/Code/Project/AlgorithmWeb/algorithmFrontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\n\n// 定义路由\nconst routes = [\n  // 不需要导航栏的路由\n  {\n    path: '/login',\n    name: 'LoginView',\n    component: () => import('../views/LoginView.vue'),\n    meta: { \n      hideHeader: true, // 标记不需要显示导航栏\n      guest: true       // 标记为访客页面（已登录用户不应访问）\n    }\n  },\n  // {\n  //   path: '/register',\n  //   name: 'RegisterView',\n  //   component: () => import('../views/RegisterView.vue'),\n  //   meta: { \n  //     hideHeader: true,\n  //     guest: true\n  //   }\n  // },\n  \n  // 需要登录权限的路由\n  {\n    path: '/',\n    name: 'HomeView',\n    component: () => import('../views/HomeView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/problems',\n    name: 'ProblemsView',\n    component: () => import('../views/ProblemsView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/solutions',\n    name: 'SolutionsView',\n    component: () => import('../views/SolutionsView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/solutions/trash',\n    name: 'SolutionTrashView',\n    component: () => import('../views/SolutionTrashView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/drafts/trash',\n    name: 'DraftTrashView',\n    component: () => import('../views/DraftTrashView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/drafts',\n    name: 'DraftsView',\n    component: () => import('../views/DraftsView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/create',\n    name: 'Create',\n    component: () => import('@/views/CreateView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/create/solution',\n    name: 'CreateSolution',\n    component: () => import('@/views/CreateSolutionView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/create/question',\n    name: 'CreateQuestion',\n    component: () => import('@/views/CreateQuestionView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/questions/update/:id?',\n    name: 'QuestionUpdate',\n    component: () => import('@/views/QuestionUpdate.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path:'/trash',\n    name: 'Trash',\n    component: () => import('@/views/TrashView.vue'),\n    meta: { requiresAuth: true }\n  },\n  {\n    path:'/problems/trash',\n    name: 'ProblemsTrash',\n    component: () => import('@/views/ProblemTrashView.vue'),\n    meta: { requiresAuth: true }\n  },\n  \n  // 详情页面也需要验证\n  {\n    path: '/:id/problems',\n    name: 'QuestionDetail',\n    component: () => import('@/views/QuestionDetailView.vue'),\n    meta: { requiresAuth: true }\n  },\n  { \n    path: '/:id/solutions',\n    name: 'SolutionDetail',\n    component: () => import('@/views/SolutionDetailView.vue'),\n    meta: { requiresAuth: true }\n  },\n  { \n    path: '/:id/drafts',\n    name: 'DraftDetail',\n    component: () => import('@/views/DraftDetailView.vue'),\n    meta: { requiresAuth: true }\n  },\n  { \n    path: '/:id/solutions/update',\n    name: 'Solution/update',\n    component: () => import('@/views/SolutionUpdateView.vue'),\n    meta: { requiresAuth: true }\n  },\n  { \n    path: '/:id/drafts/update',\n    name: 'Draft/update',\n    component: () => import('@/views/DraftUpdateView.vue'),\n    meta: { requiresAuth: true }\n  },\n  \n  // 404页面\n  {\n    path: '/:catchAll(.*)',\n    name: 'NotFound',\n    component: () => import('@/views/NotFoundView.vue'),\n    meta: { \n      hideHeader: true  // 确保404页面不显示导航栏\n    }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\n// 强化路由守卫\nrouter.beforeEach((to, from, next) => {\n  console.log('路由切换:', to.path) // 调试日志\n  \n  const token = localStorage.getItem('access_token')\n  \n  // 检查路由是否需要认证\n  if (to.matched.some(record => record.meta.requiresAuth) && !token) {\n    console.log('需要登录权限，重定向到登录页')\n    // 保存原来要访问的页面路径，登录后可以重定向回去\n    next({\n      path: '/login',\n      query: { redirect: to.fullPath }\n    })\n  } \n  // 如果是访客页面（登录页）且用户已登录，重定向到首页\n  else if (to.matched.some(record => record.meta.guest) && token) {\n    console.log('已登录用户访问登录页，重定向到首页')\n    next({ path: '/' })\n  } \n  // 其他情况正常通过\n  else {\n    next()\n  }\n})\n\nexport default router"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}